# Python 3.9 이미지를 사용하여 빌드 시작
FROM python:3.12

# 작업 디렉토리를 설정합니다.
WORKDIR /app

# 필요한 파일을 컨테이너에 복사합니다.
COPY . /app

# requirements.txt를 설치합니다.
RUN pip install --no-cache-dir -r requirements.txt

# .env 파일 로드 (로컬에서만 필요, 실제 배포 시는 환경 변수를 직접 설정)
ENV OPENAI_API_KEY=${OPENAI_API_KEY}
ENV DATABASE_URL=${DATABASE_URL}

# FastAPI 서버 실행 포트
EXPOSE 9002

# FastAPI 서버 실행 명령어
CMD ["uvicorn", "server:app", "--host", "0.0.0.0", "--port", "9002", "--reload"]
